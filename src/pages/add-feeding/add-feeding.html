<ion-header>

  <ion-toolbar color="light">

    <ion-searchbar
    [(ngModel)]="resultSearchString"
    [showCancelButton]="false" [animated]="true" [debounce]="400"
    (ionInput)="onInput($event)"
    (ionCancel)="onCancel($event)"></ion-searchbar>

  </ion-toolbar>

  <ion-segment [(ngModel)]="food_tab" color="primary">
    <ion-segment-button value="recent" (ionSelect)="switchToRecent()">
      Normal
    </ion-segment-button>
        
    <ion-segment-button value="favorite" (ionSelect)="switchToFavorite()">
        Favorite
    </ion-segment-button>

    <ion-segment-button value="internet" (ionSelect)="switchToInternet()">
      From Internet
    </ion-segment-button>

  </ion-segment>
</ion-header>


<ion-content>
  <ion-list class="result-food-list">
    <food-component *ngFor="let food of resultFoods"
      (foodSelection)="selectedFood($event)" (foodChanges)="refresh(food)" (foodMessage)="foodActionMessage($event)"
      [showCarbs]="true" [showProteins]="true" [showFats]="true" [showKCal]="true"
      [food]="food">
    </food-component>
  </ion-list>

  <ion-fab *ngIf="food_tab == 'recent'" padding-right bottom right [class.fabextramargin]="true">
    <button ion-fab (click)="addFood()"><ion-icon name="add"></ion-icon></button>
  </ion-fab>

</ion-content>



<ion-pullup
  (onExpand)="footerExpanded()" (onCollapse)="footerCollapsed()" [(state)]="footerState">

  <ion-toolbar color="light" (tap)="toggleFooter()">
      
    <ion-title text-center>
      <ion-badge *ngIf="foodSelected.length > 0 && !footerCurrentlyExpanded" item-start>{{ foodSelected.length }}</ion-badge>
      <ion-icon class="toolbar-icon" name="more"></ion-icon>
    </ion-title>

  </ion-toolbar>
  <ion-content>
    <ion-list>
      <ion-list-header>
        Food selected
      </ion-list-header>

      <food-selected
        *ngFor="let food of foodSelected" [foodSelected]="food"
        (unselectFood)="unselectedFood(food)"
        [showCarbs]="true" [showProteins]="true" [showFats]="true" [showKCal]="true"
        (foodUnSelection)="unselectedFood($event)">
      </food-selected>

    </ion-list>
  </ion-content>
</ion-pullup>
  